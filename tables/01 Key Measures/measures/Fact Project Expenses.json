{
  "name": "Fact Project Expenses",
  "description": "Фактически расходы на проекте. Включает фактическую себестоимость из трудозатрат, фактический субподряд из трудозатрат, расходы на командировки, внешний субподряд, прочие операционные расходы.",
  "expression": [
    "[Fact Cost of Works] + [Fact Transfer Cost of Works] + [Fact Resold Exp] + [Fact Project Other Opex]",
    "    + CALCULATE (",
    "        SUM ( 'FactProjectExpenses'[SUM_RUB] ),",
    "        KEEPFILTERS ( 'FactProjectExpenses'[Тип расходов RMS]",
    "            IN { \"НЗП\", \"Командировки\", \"Субподряд CZ\", \"Субподряд\" } ),",
    "        KEEPFILTERS ( 'FactProjectExpenses'[EXPENSE_CLASS] = \"OPEX\" )",
    "    )"
  ],
  "formatString": "#,0",
  "displayFolder": "01. Project\\02. Expenses\\02. Fact",
  "detailRowsDefinition": {
    "expression": [
      "VAR _X1 =",
      "    CALCULATE ( [Fact Cost of Works] )",
      "VAR _X2 =",
      "    CALCULATE ( [Fact Transfer Cost of Works] )",
      "VAR _X3 =",
      "    CALCULATE ( [Fact Resold Exp] )",
      "VAR _X4 =",
      "    CALCULATE ( [Fact Project Other Opex] )",
      "VAR _X5 =",
      "    CALCULATE (",
      "        SUM ( 'FactProjectExpenses'[SUM_RUB] ),",
      "        KEEPFILTERS ( 'FactProjectExpenses'[Тип расходов RMS] IN { \"НЗП\" } )",
      "    )",
      "VAR _X6 =",
      "    CALCULATE (",
      "        SUM ( 'FactProjectExpenses'[SUM_RUB] ),",
      "        KEEPFILTERS ( 'FactProjectExpenses'[Тип расходов RMS] IN { \"Командировки\" } )",
      "    )",
      "VAR _X7 =",
      "    CALCULATE (",
      "        SUM ( 'FactProjectExpenses'[SUM_RUB] ),",
      "        KEEPFILTERS ( 'FactProjectExpenses'[Тип расходов RMS] IN { \"Субподряд CZ\" } )",
      "    )",
      "VAR _X8 =",
      "    CALCULATE (",
      "        SUM ( 'FactProjectExpenses'[SUM_RUB] ),",
      "        KEEPFILTERS ( 'FactProjectExpenses'[Тип расходов RMS] IN { \"Субподряд\" } )",
      "    )",
      "RETURN",
      "    ROW (",
      "        \"Fact Cost of Works\", _X1,",
      "        \"Fact Transfer Cost of Works\", _X2,",
      "        \"Fact Resold Exp\", _X3,",
      "        \"Fact Project Other Opex\", _X4,",
      "        \"Fact NZP\", _X5,",
      "        \"Fact Travel Expenses\", _X6,",
      "        \"Fact Subcontract Expences CZ\", _X7,",
      "        \"Fact Subcontract Expences\", _X8,",
      "        \"Fact Project Expenses\",",
      "            _X1 + _X2 + _X3 + _X4 + _X5 + _X6 + _X7 + _X8",
      "    )"
    ]
  }
}