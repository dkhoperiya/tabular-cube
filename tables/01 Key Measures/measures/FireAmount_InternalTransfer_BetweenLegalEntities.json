{
  "name": "FireAmount_InternalTransfer_BetweenLegalEntities",
  "expression": [
    "/* Массив (таблица) выбранных дат */",
    "VAR selectedDates =",
    "    CALCULATETABLE (",
    "        VALUES ( Dates[Date] )",
    "    ) ",
    "    ",
    "/* Таблица движений сотрудников, отфильтрованная за период и тип движения */",
    "VAR recruitmentsForSelectedDates =",
    "    CALCULATETABLE (",
    "        EmployeeMovements,",
    "        selectedDates,",
    "        KEEPFILTERS ( EmployeeMovements[Action] = \"Internal Transfer\" ),",
    "        KEEPFILTERS ( EmployeeMovements[In_Out] = -1 ), -- Увольнение в рамках переводов",
    "        KEEPFILTERS ( EmployeeMovements[LegalEntityTransfer] = 1 ), -- Перевод между юр лицами",
    "        KEEPFILTERS ( Employees[Is Vacancy] = FALSE ), -- Не открытая вакансия",
    "        KEEPFILTERS ( Employees[Trainee] = \"No\" ), -- Не стажер",
    "        KEEPFILTERS ( Employees[AssigmentCombinationStatus] = \"Основное назначение\" ), -- Не совместитель",
    "        KEEPFILTERS ( Employees[AssigmentTypeName] = \"STUFF\" ) -- Штатный сотрудник",
    "    )",
    "",
    "/* Количество принятых сотрудников за отчетный период */",
    "RETURN",
    "    CALCULATE ( SUM ( EmployeeMovements[In_Out] ), recruitmentsForSelectedDates )"
  ],
  "formatString": "#,##0",
  "displayFolder": "09. HR"
}